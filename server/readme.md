# NetFlows
plugin for OpenNetBattle servers, this plugin lets you create all kinds of interactions on your server without directly writing any code.

[OpenNetBattle server repo](https://github.com/TheMaverickProgrammer/Scriptable-OpenNetBattle-Server)

### example uses
*most of these are not possible yet, but this is the vision*
- trigger a cutscene with all the movements and events defined in the map editor.
- every 10 seconds spawn a bot which follows a path until the end where it despawns
- add simple interact text to objects âœ…
- when a player joins the server, send them to a particular location
- when a player presses R, open a menu BBS with many options, trigger any action when any of these are selected.

The plan is that we should be able to do 90% of what the scriptable server is capabile of, without writing any code.

### Installation
simply copy the `netflows` folder into your server folder, eg: `server/scripts/netflows`

### Usage
#### tiled setup
*note, the following instructions are not correct yet, currently the tile definitions are in the example server.tiled-project in the `onb-server-template` ezlibs2 branch*

import the custom types from `netflows/custom_types` into your tiled edtior from the toolbar **view** -> **custom types** -> **import**

this will give you a complete list of all the classes supported by this library, when you create a object in tiled you will be able to select a class

#### process
TBD

#### examples
have a look at the maps files in this [git repository](https://github.com/Keristero/onb-server-template/tree/ezlibs2)
you could follow the steps download and run it as an example too.

# Documentation
*this section of the documentation is autogenerated so you can rest assured it will always be up to date!*

## $${\color{#3cb44b}tile}$$
supported nodes for tile objects placed on your map

|    class     |          description          |                                   arguments                                   | handlers |
|--------------|-------------------------------|-------------------------------------------------------------------------------|----------|
| Custom Warp  | triggers when stepped on      | <pre><code class="language-c">on_custom_warp //object<br></code></pre>        |          |
| Interactable | triggers when interacted with | <pre><code class="language-c">on_object_interaction //object<br></code></pre> |          |

## $${\color{#ffe119}dialogue}$$
dialogue related nodes

|     class      |                       description                       |                                                                     arguments                                                                     | handlers |
|----------------|---------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| message_player | Send a textbox to player, _next after textbox is closed | <pre><code class="language-c">player_id //string<br>message //string<br>mug_texture_path //string<br>mug_animation_path //string<br></code></pre> |          |

## $${\color{#911eb4}player}$$
player related nodes

|      class      |              description               |                                                                                arguments                                                                                | handlers |
|-----------------|----------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| transfer_player | Transfer player to a location on a map | <pre><code class="language-c">player_id //string<br>area_id //string<br>warp_in //boolean<br>x //float<br>y //float<br>z //float<br>direction //string<br></code></pre> |          |

## $${\color{#f58231}bot}$$
bot related nodes

|   class    | description  |                          arguments                          |                                   handlers                                   |
|------------|--------------|-------------------------------------------------------------|------------------------------------------------------------------------------|
| create_bot | Create a bot | <pre><code class="language-c">bot //object<br></code></pre> | <pre><code class="language-c">on_actor_interaction //object<br></code></pre> |

## $${\color{#e6194B}trigger}$$
nodes which start flows when an event happens on the server

|          class          |                  description                  |                                    arguments                                    | handlers |
|-------------------------|-----------------------------------------------|---------------------------------------------------------------------------------|----------|
| on_actor_interaction    | triggers when a player interacts with a actor | <pre><code class="language-c">on_actor_interaction //object<br></code></pre>    |          |
| on_player_area_transfer | triggers when a player transfers area         | <pre><code class="language-c">on_player_area_transfer //object<br></code></pre> |          |

## $${\color{#4363d8}data}$$
nodes which store data, sometimes required by other nodes.

|    class    |   description   |                                                                                                                            arguments                                                                                                                            | handlers |
|-------------|-----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| bot_details | describes a bot | <pre><code class="language-c">area_id //string<br>warp_in //boolean<br>texture_path //string<br>animation_path //string<br>animation //string<br>x //float<br>y //float<br>z //float<br>direction //string<br>solid //boolean<br>name //string<br></code></pre> |          |

